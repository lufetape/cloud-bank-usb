<!DOCTYPE html PUBLIC 
    "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/base/templates/main-gui.xhtml">
    <ui:define name="content">
        <h:form id="formGestion">
            <p:growl id="messages" showSummary="false" showDetail="true" life="3000" />
            <table width="100%" cellpadding="0" cellspacing="0">
                <tr> 
                    <td width="80%" valign="top">
                        <p:panel id="panel" header="#{bundle_tipo_documento.label_panel_titulo}" style="border: none; padding: 0px">
                            <br />
                            <p:fieldset legend="#{bundle_tipo_documento.label_resultados_titulo}">
                                <table cellpadding="0" cellspacing="0" width="100%" border="0">
                                    <tr>
                                        <td height="40">
                                            <table cellpadding="0" cellspacing="0" width="100%">
                                                <tr>
                                                    <td align="left">
                                                        <p:graphicImage id="help" url="/resources/images/24x24/Help-icon.png" style="vertical-align: middle" />
                                                        &nbsp;
                                                        <b>#{bundle_tipo_documento.label_resultados_ayuda_titulo}</b>
                                                        #{bundle_tipo_documento.label_resultados_ayuda_descripcion}
                                                    </td>
                                                    <td align="right">
                                                        <p:commandButton value="#{bundle_comun.button_modificar}"
                                                                         title="#{bundle_tipo_documento.label_modificar_titulo}"
                                                                         actionListener="#{tipoDocumentoBacking.lanzarModificar}" 
                                                                         id="lanzarModificar"   
                                                                         update=":formModificar, :formGestion:messages, :formGestion:msg"
                                                                         icon="modificar"
                                                                         style="margin:0"/>
                                                        &nbsp;
                                                        <p:commandButton value="#{bundle_comun.button_eliminar}"
                                                                         title="#{bundle_tipo_documento.label_eliminar_titulo}"
                                                                         actionListener="#{tipoDocumentoBacking.lanzarEliminar}" 
                                                                         id="lanzarEliminar"   
                                                                         update=":formEliminar, :formGestion:messages, :formGestion:msg"
                                                                         icon="eliminar"
                                                                         style="margin:0"/>
                                                        <p:spacer width="20" />
                                                        <p:commandButton id="crear" 
                                                                         value="#{bundle_comun.button_nuevo}" 
                                                                         title="#{bundle_tipo_documento.button_resultados_nuevo}" 
                                                                         actionListener="#{tipoDocumentoBacking.lanzarCrear}" 
                                                                         oncomplete="crearDlg.show();" 
                                                                         update=":formCrear"
                                                                         icon="crear"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td>
                                            <p:dataTable id="tiposDocumentos"  
                                                         widgetVar="widgetTiposDocumentos"
                                                         var="tipoDocumento" 
                                                         value="#{tipoDocumentoBacking.tiposDocumentosList}"    
                                                         rowKey ="#{tipoDocumento.tdocCodigo}" 
                                                         paginator="true"
                                                         paginatorPosition="bottom"
                                                         rows="10" 
                                                         selectionMode="single"
                                                         selection="#{tipoDocumentoBacking.selectedTipoDocumento}"
                                                         emptyMessage="#{bundle_comun.label_paginador_empty}"
                                                         paginatorTemplate="#{bundle_comun.label_paginador_template}"  
                                                         currentPageReportTemplate="#{bundle_comun.label_paginador_currentTemplate}"
                                                         rowsPerPageTemplate="#{bundle_comun.label_paginador_rowsTemplate}"
                                                         filteredValue="#{tipoDocumentoBacking.filteredtiposDocumentosList}">

                                                <p:column headerText="&nbsp;#{bundle_tipo_documento.label_resultados_tabla_codigo}" 
                                                          sortBy="#{tipoDocumento.tdocCodigo}"
                                                          filterBy="#{tipoDocumento.tdocCodigo}"
                                                          filterMatchMode="contains"
                                                          filterStyle="width: 50px"
                                                          filterMaxLength="3"
                                                          style="text-align: center">              
                                                    #{tipoDocumento.tdocCodigo}
                                                </p:column>

                                                <p:column headerText="&nbsp;#{bundle_tipo_documento.label_resultados_tabla_descripcion}" 
                                                          sortBy="#{tipoDocumento.tdocNombre}"
                                                          filterBy="#{tipoDocumento.tdocNombre}"
                                                          filterMatchMode="contains"
                                                          filterStyle="width: 150px"
                                                          filterMaxLength="50"
                                                          style="text-align: left">              
                                                    #{tipoDocumento.tdocNombre}
                                                </p:column>

                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:fieldset>
                            <p:messages id="msg" showSummary="false" showDetail="true" />
                            <br/>
                        </p:panel>
                    </td>
                </tr>
            </table> 
        </h:form>
        <h:form id="formCrear">
            <p:dialog modal="true" 
                      header="#{bundle_tipo_documento.label_nuevo_titulo}" 
                      widgetVar="crearDlg">                
                <p:ajax event="close" listener="#{tipoDocumentoBacking.listarTodos}" update="@form" oncomplete="widgetTiposDocumentos.filter()" />
                <p:panelGrid id="panelCrear" columns="2" style="width: 100%">  

                    <h:outputLabel value="#{bundle_tipo_documento.label_nuevo_modificar_codigo}" />
                    <p:inputText size="50"
                                 label="#{bundle_tipo_documento.label_nuevo_modificar_codigo}"
                                 required="true"
                                 maxlength="3"
                                 value="#{tipoDocumentoBacking.selectedTipoDocumento.tdocCodigo}" />
                    
                    <h:outputLabel value="#{bundle_tipo_documento.label_nuevo_modificar_descripcion}" />
                    <p:inputText size="50"
                                 label="#{bundle_tipo_documento.label_nuevo_modificar_descripcion}"
                                 required="true"
                                 maxlength="50"
                                 value="#{tipoDocumentoBacking.selectedTipoDocumento.tdocNombre}" />
                </p:panelGrid>        
                <f:facet name="footer">  
                    <p:commandButton value="#{bundle_comun.button_aceptar}" 
                                     title="#{bundle_tipo_documento.button_nuevo_crear}" 
                                     actionListener="#{tipoDocumentoBacking.crear}" 
                                     id="crear"   
                                     update=":formGestion:messages, panelCrear, msgCrear"
                                     icon="ui-icon-check"
                                     style="margin:0"/>
                    &nbsp;
                    <p:commandButton value="#{bundle_comun.button_cerrar}" 
                                     title="#{bundle_comun.button_cerrar}" 
                                     type="button" 
                                     icon="ui-icon-close"
                                     onclick="crearDlg.hide();"/>
                    <p:messages id="msgCrear" showSummary="false" showDetail="true" />
                </f:facet>
            </p:dialog> 
        </h:form>
        
        <h:form id="formModificar">
            <p:dialog modal="true" 
                      header="#{bundle_tipo_documento.label_modificar_titulo}" 
                      widgetVar="modificarDlg"> 
                <p:ajax event="close" listener="#{tipoDocumentoBacking.listarTodos}" update="@form" oncomplete="widgetTiposDocumentos.filter()" />
                <p:panelGrid id="panelModificar" columns="2" style="width: 100%">  

                    <h:outputLabel value="#{bundle_tipo_documento.label_nuevo_modificar_codigo}" />
                    <h:outputLabel value="#{tipoDocumentoBacking.selectedTipoDocumento.tdocCodigo}" style="font-weight: bold" />
                    
                    <h:outputLabel value="#{bundle_tipo_documento.label_nuevo_modificar_descripcion}" />
                    <p:inputText size="50"
                                 label="#{bundle_tipo_documento.label_nuevo_modificar_descripcion}"
                                 required="true"
                                 maxlength="50"
                                 value="#{tipoDocumentoBacking.selectedTipoDocumento.tdocNombre}" />
                    
                </p:panelGrid>  
                <f:facet name="footer">  
                    <p:commandButton value="#{bundle_comun.button_guardar}" 
                                     title="#{bundle_tipo_documento.button_modificar_guardar}" 
                                     actionListener="#{tipoDocumentoBacking.modificar}" 
                                     id="modificar"   
                                     update=":formGestion:messages, panelModificar, msgModificar"
                                     icon="ui-icon-check"
                                     style="margin:0"/>
                    &nbsp;
                    <p:commandButton value="#{bundle_comun.button_cerrar}"
                                     title="#{bundle_comun.button_cerrar}"
                                     type="button"
                                     icon="ui-icon-close"
                                     onclick="modificarDlg.hide()"/>
                    <p:messages id="msgModificar" showSummary="false" showDetail="true" />
                </f:facet> 
            </p:dialog>
        </h:form>
        
        <h:form id="formEliminar">
            <p:confirmDialog id="confirmDialog" 
                             message="#{bundle_tipo_documento.label_eliminar_pregunta}"  
                             header="#{bundle_tipo_documento.label_eliminar_titulo}" 
                             severity="alert" 
                             widgetVar="eliminarDlg">
                <p:commandButton id="confirm" 
                                 value="#{bundle_comun.button_si_seguro}" 
                                 title="#{bundle_comun.button_si_seguro}"
                                 update=":formGestion:messages"
                                 oncomplete="widgetTiposDocumentos.filter(); eliminarDlg.hide()" 
                                 actionListener="#{tipoDocumentoBacking.eliminar}" />  
                <p:commandButton id="decline" 
                                 value="#{bundle_comun.button_no}" 
                                 title="#{bundle_comun.button_no} (#{bundle_comun.button_cerrar})" 
                                 onclick="eliminarDlg.hide()" 
                                 type="button" /> 
            </p:confirmDialog> 
        </h:form>
    </ui:define>
</ui:composition>