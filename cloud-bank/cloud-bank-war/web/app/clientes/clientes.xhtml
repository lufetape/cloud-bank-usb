<!DOCTYPE html PUBLIC 
    "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/base/templates/main-gui.xhtml">
    <ui:define name="content">
        <h:form id="form">
            <p:panel id="panel" header="Gestión de Clientes y cuentas (Internacionalización)">
                <br />
                <p:commandButton value="Go to Lista Clientes" rendered="#{!clienteBacking.renderedListaClientes}"
                                 title="Crear cliente" 
                                 update=":form:panel"
                                 actionListener="#{clienteBacking.renderizarListaClientes}"
                                 icon="ui-icon-arrowthickstop-1-w"/>
                <p:commandButton value="Go to Cliente" rendered="#{clienteBacking.renderedCuenta}" 
                                 title="Crear cliente" 
                                 update=":form:panel"
                                 actionListener="#{clienteBacking.renderizarCliente}"
                                 icon="ui-icon-arrowthick-1-w"/>
                <br /><br />
                <p:fieldset legend="Clientes" rendered="#{clienteBacking.renderedListaClientes}">
                    <table cellpadding="0" cellspacing="0" border="0" width="100%">
                        <tr>
                            <td height="30">
                                <table cellpadding="0" cellspacing="0" width="100%">
                                    <tr>
                                        <td align="left">
                                            <p:graphicImage id="help" url="/resources/images/imagenes/24x24/Help-icon.png" />
                                            <p:tooltip for="help" showEffect="slide" hideEffect="slide" >
                                                <b>Ayuda:</b>
                                                Descripcion de la ayuda
                                            </p:tooltip>
                                        </td>
                                        <td align="right">
                                            <p:commandButton id="crear" 
                                                             value="Crear Cliente" 
                                                             title="Crear cliente" 
                                                             icon="crear"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr> 
                        <tr>
                            <td>
                                <p:dataTable id="clientes"  
                                             widgetVar="widgetClientes"
                                             var="cliente" 
                                             value="#{clienteBacking.clientesList}"    
                                             rowKey ="#{cliente.cliId}" 
                                             paginator="true"
                                             paginatorPosition="bottom"
                                             filteredValue="#{clienteBacking.filteredClientesList}"
                                             rows="10" 
                                             selectionMode="single"
                                             selection="#{clienteBacking.selectedCliente}">

                                    <p:ajax event="rowSelect" 
                                            update=":form:panel" 
                                            listener="#{clienteBacking.seleccionarCliente}" />

                                    <p:column headerText="&nbsp;Tipo Documento" 
                                              sortBy="#{cliente.tdocCodigo.tdocNombre}"
                                              style="text-align: left">              
                                        #{cliente.tdocCodigo.tdocNombre}
                                    </p:column>

                                    <p:column headerText="&nbsp;No. Documento" 
                                              sortBy="#{cliente.cliId}"
                                              filterBy="#{cliente.cliId}"
                                              filterMatchMode="contains"
                                              filterStyle="width: 100px"
                                              filterMaxLength="50"
                                              style="text-align: left">              
                                        #{cliente.cliId}
                                    </p:column>

                                    <p:column headerText="&nbsp;Nombre" 
                                              sortBy="#{cliente.cliNombre}"
                                              filterBy="#{cliente.cliNombre}"
                                              filterMatchMode="contains"
                                              filterStyle="width: 200px"
                                              filterMaxLength="50"
                                              style="text-align: left">              
                                        #{cliente.cliNombre}
                                    </p:column>
                                </p:dataTable>
                            </td>
                        </tr>
                    </table>
                </p:fieldset>
                <p:fieldset legend="#{clienteBacking.selectedCliente.cliNombre}" rendered="#{clienteBacking.renderedCliente}"> 
                    <br/>
                    <table cellpadding="10" cellspacing="0" width="100%">
                        <tr>
                            <td width="30%" valign="top">
                                Datos personales:<br/><br/>
                                <p:panelGrid style="width: 100%">  

                                    <p:row>
                                        <p:column style="width: 30px; text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/Person-Male-Light-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column style="width: 100px">
                                            <h:outputLabel value="Identificación:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCliente.tdocCodigo.tdocNombre} No. #{clienteBacking.selectedCliente.cliId}" />  
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/Comment-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Nombre:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCliente.cliNombre}" /> 
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/Groups-Rescuers-Light-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Dirección:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCliente.cliDireccion}" />
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/role-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Telefono:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCliente.cliTelefono}" /> 
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/application-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Email" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCliente.cliMail}" />  
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </td>
                            <td valign="top">
                                Cuentas de Ahorro:<br/><br/>
                                <p:dataTable id="cuentas"  
                                             widgetVar="widgetCuentas"
                                             var="cuenta" 
                                             value="#{clienteBacking.selectedCliente.cuentasCollection}"    
                                             rowKey ="#{cuenta.cueNumero}" 
                                             paginator="true"
                                             paginatorPosition="bottom"
                                             filteredValue="#{clienteBacking.filteredCuentasList}"
                                             rows="10" 
                                             selectionMode="single"
                                             selection="#{clienteBacking.selectedCuentas}">

                                    <p:ajax event="rowSelect" 
                                            update=":form:panel" 
                                            listener="#{clienteBacking.seleccionarCuenta}" />

                                    <p:column headerText="&nbsp;Número" 
                                              sortBy="#{cuenta.cueNumero}"
                                              filterBy="#{cliente.cliId}"
                                              filterMatchMode="contains"
                                              filterStyle="width: 100px"
                                              filterMaxLength="50"
                                              style="text-align: left">              
                                        #{cuenta.cueNumero}
                                    </p:column>

                                    <p:column headerText="&nbsp;Saldo" 
                                              sortBy="#{cuenta.cueSaldo}"
                                              style="text-align: right">              
                                        #{cuenta.cueSaldo}
                                    </p:column>

                                    <p:column headerText="&nbsp;Estado" 
                                              sortBy="#{cuenta.cueActiva}"
                                              style="text-align: center">              
                                        #{cuenta.cueActiva}
                                    </p:column>
                                </p:dataTable>
                            </td>
                        </tr>
                    </table>
                    <br />
                </p:fieldset>
                <p:fieldset legend="#{clienteBacking.selectedCuentas.cueNumero}" rendered="#{clienteBacking.renderedCuenta}">                    
                    <table cellpadding="10" cellspacing="0" width="100%">
                        <tr>
                            <td width="30%" valign="top">
                                Información de la cuenta:<br/><br/>
                                <p:panelGrid style="width: 100%">  

                                    <p:row>
                                        <p:column style="width: 30px; text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/Person-Male-Light-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column style="width: 100px">
                                            <h:outputLabel value="Número:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCuentas.cueNumero}" />  
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/Comment-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Propietario:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCuentas.cliId.cliNombre}" /> 
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/Groups-Rescuers-Light-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Saldo:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCuentas.cueSaldo}" />
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="text-align: center">
                                            <p:graphicImage value="/resources/images/24x24/role-icon.png" style="vertical-align: middle" />
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Estado:" style="font-weight: bold" />  
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="#{clienteBacking.selectedCuentas.cueActiva}" /> 
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </td>
                            <td valign="top">
                                Movimientos:<br/><br/>
                                <p:tabView id="tabView">  

                                    <p:tab id="tabConsignaciones" title="Consignaciones">  
                                        <p:dataTable id="consignaciones"  
                                                     widgetVar="widgetConsignaciones"
                                                     var="consignacion" 
                                                     value="#{clienteBacking.selectedCuentas.consignacionesCollection}"    
                                                     rowKey ="#{consignacion.consignacionesPK}" 
                                                     paginator="true"
                                                     paginatorPosition="bottom"
                                                     filteredValue="#{clienteBacking.filteredConsignacionesList}"
                                                     rows="10" 
                                                     selectionMode="single"
                                                     selection="#{clienteBacking.selectedConsignaciones}">

                                            <p:ajax event="rowSelect" 
                                                    oncomplete="alert('Hola consignaciones')" />

                                            <p:column headerText="&nbsp;Fecha" 
                                                      sortBy="#{consignacion.conFecha}"
                                                      style="text-align: center">              
                                                #{consignacion.conFecha}
                                            </p:column>

                                            <p:column headerText="&nbsp;Valor" 
                                                      sortBy="#{consignacion.conValor}"
                                                      style="text-align: right">              
                                                #{consignacion.conValor}
                                            </p:column>

                                            <p:column headerText="&nbsp;Código" 
                                                      sortBy="#{consignacion.consignacionesPK.conCodigo}"
                                                      filterBy="#{consignacion.consignacionesPK.conCodigo}"
                                                      filterMatchMode="contains"
                                                      filterStyle="width: 60px"
                                                      filterMaxLength="10"
                                                      style="text-align: center">              
                                                #{consignacion.consignacionesPK.conCodigo}
                                            </p:column>

                                            <p:column headerText="&nbsp;Descripción" 
                                                      sortBy="#{consignacion.conDescripcion}"
                                                      filterBy="#{consignacion.conDescripcion}"
                                                      filterMatchMode="contains"
                                                      filterStyle="width: 100px"
                                                      filterMaxLength="10"
                                                      style="text-align: center">              
                                                #{consignacion.conDescripcion}
                                            </p:column>

                                            <p:column headerText="&nbsp;Cajero(a) / Usuario" 
                                                      sortBy="#{consignacion.usuCedula.usuNombre}"
                                                      filterBy="#{consignacion.usuCedula.usuNombre}"
                                                      style="text-align: left">              
                                                #{consignacion.usuCedula.usuNombre}
                                            </p:column>
                                        </p:dataTable>  
                                    </p:tab>  

                                    <p:tab id="tabRetiros" title="Retiros">  
                                        <p:dataTable id="retiros"  
                                                     widgetVar="widgetRetiros"
                                                     var="retiro" 
                                                     value="#{clienteBacking.selectedCuentas.retirosCollection}"    
                                                     rowKey ="#{retiro.retirosPK}" 
                                                     paginator="true"
                                                     paginatorPosition="bottom"
                                                     filteredValue="#{clienteBacking.filteredRetirosList}"
                                                     rows="10" 
                                                     selectionMode="single"
                                                     selection="#{clienteBacking.selectedRetiros}" >

                                            <p:ajax event="rowSelect" 
                                                    oncomplete="alert('Hola retiros')" />

                                            <p:column headerText="&nbsp;Fecha" 
                                                      sortBy="#{retiro.retFecha}"
                                                      style="text-align: center">              
                                                #{retiro.retFecha}
                                            </p:column>

                                            <p:column headerText="&nbsp;Valor" 
                                                      sortBy="#{retiro.retValor}"
                                                      style="text-align: right">              
                                                #{retiro.retValor}
                                            </p:column>

                                            <p:column headerText="&nbsp;Código" 
                                                      sortBy="#{retiro.retirosPK.retCodigo}"
                                                      filterBy="#{retiro.retirosPK.retCodigo}"
                                                      filterMatchMode="contains"
                                                      filterStyle="width: 60px"
                                                      filterMaxLength="10"
                                                      style="text-align: center">              
                                                #{retiro.retirosPK.retCodigo}
                                            </p:column>

                                            <p:column headerText="&nbsp;Descripción" 
                                                      sortBy="#{retiro.retDescripcion}"
                                                      filterBy="#{retiro.retDescripcion}"
                                                      filterMatchMode="contains"
                                                      filterStyle="width: 100px"
                                                      filterMaxLength="10"
                                                      style="text-align: center">              
                                                #{retiro.retDescripcion}
                                            </p:column>

                                            <p:column headerText="&nbsp;Cajero(a) / Usuario" 
                                                      sortBy="#{retiro.usuCedula.usuNombre}"
                                                      filterBy="#{consignacion.usuCedula.usuNombre}"
                                                      style="text-align: left">              
                                                #{retiro.usuCedula.usuNombre}
                                            </p:column>
                                        </p:dataTable>  
                                    </p:tab>
                                </p:tabView>
                            </td>
                        </tr>
                    </table>
                    <br />
                </p:fieldset>
                <p:messages id="msg" showSummary="true" showDetail="true" />
                <br/>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>